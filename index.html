<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <style>


    </style>
</head>

<body>
    <form id="photoForm">
        <input type="file" name="file" id="pic">
        <input type="submit" />
    </form>

    <canvas id="Canvas" width="600" height="400"></canvas>

    <!-- <div id="mouseSlider" onmousemove="mouseMove(event)" onmouseout="clearCoor()"></div> -->
    <form class="row">
        <div>
            <label for="red">Red: <span>100%</span></label>
            <input type="range" id="red" min="0" max="100" value="100">
        </div>
        <div>
            <label for="green">Green: <span>100%</span></label>
            <input type="range" id="green" min="0" max="100" value="100">
        </div>
        <div>
            <label for="blue">Blue: <span>100%</span></label>
            <input type="range" id="blue" min="0" max="100" value="100">
        </div>
    </form>

    <script>
        let c = document.getElementById("Canvas");
        let ctx = c.getContext("2d");
        const form = document.getElementById('photoForm');
        let redControl = document.getElementById('red');
        let greenControl = document.getElementById('green');
        let blueControl = document.getElementById('blue');
        let readPixels;
        let writePixels;
        form.addEventListener('submit', (e) => {
            e.preventDefault();


            let org = document.createElement("IMG");
            org.crossOrigin = "Anonymous";

            org.src = 'http://thedersen.com/talks/2012/01/25/javascript-the-good-parts/images/bad-vs-good.jpg';//'./' + document.getElementById("pic").files[0].name;         // 

            org.onload = () => {
                ctx.drawImage(org, 0, 0, 600, 400);
                readPixels = ctx.getImageData(0, 0, 600, 400);
                writePixels = ctx.getImageData(0, 0, c.width, c.height);
                applayFilter();

            }


        })


        let applayFilter = function () {
            let red = redControl.value / 100;
            let green = greenControl.value / 100;
            let blue = blueControl.value / 100;
            for (let i = 0; i < readPixels.data.length; i += 4) {
                readPixels.data[i] = writePixels.data[i] * red;
                readPixels.data[i + 1] = writePixels.data[i + 1] * green;
                readPixels.data[i + 2] = writePixels.data[i + 2] * blue;
                readPixels.data[i + 3] = writePixels.data[i + 3];
            }

            ctx.putImageData(readPixels, 0, 0);
        };

        redControl.onchange = function () {
            let label = document.querySelector('label[for="red"] span');
            label.innerHTML = this.value + '%';
            applayFilter();
        }
        greenControl.onchange = function () {
            let label = document.querySelector('label[for="green"] span');
            label.innerHTML = this.value + '%';
            applayFilter();
        }
        blueControl.onchange = function () {
            let label = document.querySelector('label[for="blue"] span');
            label.innerHTML = this.value + '%';
            applayFilter();
        }

    </script>

</body>

</html>